@inherits Microsoft.VisualStudio.Web.CodeGeneration.Templating.RazorTemplateBase
@using Microsoft.VisualStudio.Web.CodeGeneration.EntityFrameworkCore
@@model @Model.ViewDataTypeName


@{
   @:@@{ Layout = null; }


foreach (var property in Model.ModelMetadata.Properties)
{
if (property.IsPrimaryKey)
{
    @:@@Html.HiddenFor(a => a.@property.PropertyName)
}
if (property.PropertyName == "BusinessEntityId")
{
    @:@@Html.HiddenFor(a => a.@property.PropertyName)
}
if (property.PropertyName == "CreateDate")
{
    @:@@Html.HiddenFor(a => a.@property.PropertyName)
}
if (property.PropertyName == "ModifiedDate")
{
    @:@@Html.HiddenFor(a => a.@property.PropertyName)
}
if (property.PropertyName == "rowguid")
{
    @:@@Html.HiddenFor(a => a.@property.PropertyName)
}
if (property.PropertyName == "UserId")
{
    @:@@Html.HiddenFor(a => a.@property.PropertyName)
}
if (property.PropertyName == "Deleted")
{
    @:@@Html.HiddenFor(a => a.@property.PropertyName)
}
}



@:<div class="controls">
     foreach (var property in Model.ModelMetadata.Properties)
    {

        //@: propriedade @property.PropertyName é @property.TypeName  (FK)@property.IsForeignKey (SF)@property.Scaffold (AG) @property.IsAutoGenerated (RO) @property.IsReadOnly

        if (property.Scaffold &&  !property.IsPrimaryKey /*!property.IsAutoGenerated*/ && !property.IsReadOnly)
        {
            if (
                  (property.PropertyName == "BusinessEntityId") ||
                  (property.PropertyName == "CreateDate") ||
                  (property.PropertyName == "ModifiedDate") ||
                  (property.PropertyName == "rowguid") ||
                  (property.PropertyName == "UserId") ||
                  (property.PropertyName == "Deleted")
                )
            {
                continue;
            }


            if (property.IsForeignKey)
            {
        @:<div class="form-row">
            @:<div class="form-group col-md-6">
                @:<label asp-for="@property.PropertyName">@@Localizer["@property.PropertyName"]</label>
                  @:<select asp-for="@property.PropertyName" class ="form-control" asp-items="ViewBag.@property.PropertyName"></select>
                  @:<span asp-validation-for="@property.PropertyName" class="text-danger"></span>
            @:</div>
        @:</div>
                continue;
            }

            bool isCheckbox = property.TypeName.Contains("System.Boolean") || property.TypeName.Equals("System.Boolean");



            if (isCheckbox)
            {
        @:<div class="form-row">
            @:<div class="form-group col-md-6">
                @:<div class="checkbox">
                @:<label>
                    @:<input asp-for="@property.PropertyName" type="checkbox" class="checkbox style-0"  />
                    @:<span><label asp-for="@property.PropertyName">@@Localizer["@property.PropertyName"]</label></span>
                @:</label>
                @:</div>
            @:</div>
        @:</div>
            }
            else if (property.IsEnum && !property.IsEnumFlags)
            {
        @:<div class="form-row">
            @:<div class="form-group col-md-6">
                @:<label asp-for="@property.PropertyName">@@Localizer["@property.PropertyName"]</label>
                @:<select asp-for="@property.PropertyName" class="form-control"></select>
                @:<span asp-validation-for="@property.PropertyName" class="text-danger"></span>
            @:</div>
        @:</div>
            }
            else
            {
        @:<div class="form-row">
            @:<div class="form-group col-md-6">
                @:<label asp-for="@property.PropertyName">@@Localizer["@property.PropertyName"]</label>
                @:<input asp-for="@property.PropertyName" placeholder="@@Localizer["@property.PropertyName"]" class="form-control" />
                @:<span asp-validation-for="@property.PropertyName" class="text-danger"></span>
            @:</div>
        @:</div>
            }
        }
    }
    
@:</div>



}
@functions
{
    // Do we need to use this in conjunction with the PrimaryKey check?
    bool IsPropertyGuid(PropertyMetadata property)
    {
        return string.Equals("System.Guid", property.TypeName, StringComparison.OrdinalIgnoreCase);
    }
}